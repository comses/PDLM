[Controller]
out_ports = ["out"]
time_advance = 10
internal_transition_function = """
if state == "on":
    state = "off"
else:
    state = "on"
ta = 1
"""
output_function = """
send(out, state)
"""

[Controller.state.state]
type = "string"
initial_value = "off"

[Controller.state.time_advance]
type = "float"
initial_value = 10

[Light]
in_ports = ["in"]
time_advance = inf
external_transition_function = """
state = message
"""

[Light.state.state]
type = "string"
initial_value = "off"

[Light.state.time_advance]
type = "float"
initial_value = float("inf")

[root]
components = [
    { model = "Controller", name = "controller" },
    { model = "Light", name = "light1" },
    { model = "Light", name = "light2" },
    { model = "Light", name = "light3" },
    { model = "Light", name = "light4" },
    { model = "Light", name = "light5" }
]

[[root.connections]]
source = "controller.out"
target = "light1.in"

[[root.connections]]
source = "controller.out"
target = "light2.in"

[[root.connections]]
source = "controller.out"
target = "light3.in"

[[root.connections]]
source = "controller.out"
target = "light4.in"

[[root.connections]]
source = "controller.out"
target = "light5.in"